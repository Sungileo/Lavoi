<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>{{ username }}ë‹˜ì˜ í™”ì¥ì‹¤</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" href="{{ url_for('static', path='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='effect.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='shower.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='light.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='mirror.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='baloon.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&family=SUSE:wght@100..800&display=swap" rel="stylesheet">
</head>


<body>
    <button id="toggle-sidebar">
        <div class="button_inner_bar"></div>
        <div class="button_inner_bar"></div>
        <div class="button_inner_bar"></div>
        <div class="button_inner_bar"></div>
        <div class="button_inner_bar"></div>
    </button>
    <div id="sidebar">        

        <div class="component_1" id="mirror">
            <div>
                <img src="images/icon_mirror.png" class="icon">&nbsp;
                <span>Mirror</span>    
            </div>
            <span class="arrow">&#62;</span>
        </div>


        <div class="hide" id="mirror_child">
            <div class="mirror_child_content_mirror_div">
                
                <div class="moodbox_1">
                    <div class="mood_2 mood-1 youtube-box">ìœ íŠœë¸Œ</div>
                    <div class="mood_2 mood-2"><img src="images/mirror_img/weather.png" alt="Weather"></div>    
                </div>
                <div class="moodbox_2">
                    <div class="mood_2 mood-3"><img src="images/mirror_img/insta.png" alt="Instagram"></div>
                    <div class="mood_2 mood-4"><img src="images/mirror_img/kakao.png" alt="KakaoTalk"></div>
                    <div class="mood_2 mood-5"><img src="images/mirror_img/melon.png" alt="Melon"></div>
                    <div class="mood_2 mood-6"><img src="images/mirror_img/google.png" alt="Google"></div>    
                </div>
                <div class="moodbox_3">
                    <div class="mood_2 mood-7"><img src="images/mirror_img/news.png" alt="News"></div>
                    <div class="mood_2 mood-8"><img src="images/mirror_img/station.png" alt="Information"></div>
                </div>
            </div>
        </div>


        <div class="component_1" id="light">
            <div>
                <img src="images/icon_light.png" class="icon">&nbsp;
                <span>Lightning</span>    
            </div>
            <span class="arrow">&#62;</span>
        </div>
        <div class="hide" id="light_child">
            <div class="mirror_child_content">
                <form class="container_2">
                    <h1>Light</h1>
                    <div class="slider-container">
                        <input type="range" min="0" max="100" value="30" class="slider" id="myRange">
                        <div class="slider-value">30%</div>
                        <div class="slider-labels">
                            <span>0%</span>
                            <span>25%</span>
                            <span>50%</span>
                            <span>75%</span>
                            <span>100%</span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="mood_container">
                <div class="mood">ì¶”ì²œ ë¶„ìœ„ê¸°<br>(ë°±ì—”ë“œ ì‘ì—…)</div>
                <div class="mood">ì¶”ì²œ ë¶„ìœ„ê¸°<br>(ë°±ì—”ë“œ ì‘ì—…)</div>
                <div class="mood">ì¶”ì²œ ë¶„ìœ„ê¸°<br>(ë°±ì—”ë“œ ì‘ì—…)</div>
            </div>
        </div>
        
        <div class="component_1" id="vent">
            <div>
                <img src="images/icon_vent.png" class="icon">&nbsp;
                <span>Air Solution</span>    
            </div>
            <span class="arrow">&#62;</span>
        </div>
        <div class="hide" id="vent_child">
            <div class="2by2"></div>

        </div>





        <div class="component_1" id="shower">
            <div>
                <img src="images/icon_shower.png" class="icon">&nbsp;
                <span>Shower</span>    
            </div>
            <span class="arrow">&#62;</span>
        </div>
        <div class="hide" id="shower_child">
            <div class="container"></div>
                <h1>Shower</h1>
                <!-- ================ìƒ¤ì›Œ htmlêµ¬í˜„ë¶€==================== -->
                <div class="shower-controls">
                    <div class="shower-control-panel">
                        <div class="shower-button" onclick="adjustShowerValue('temperature', 1)">+</div>
                        <div id="shower-temperature" class="shower-value">45â„ƒ</div>
                        <div class="shower-label">ì„¤ì •ìˆ˜ì˜¨</div>
                        <div class="shower-button" onclick="adjustShowerValue('temperature', -1)">-</div>
                    </div>
                    <div class="shower-control-panel">
                        <div class="shower-button" onclick="adjustShowerValue('pressure', 1)">+</div>
                        <div id="shower-pressure" class="shower-value">5/10</div>
                        <div class="shower-label">ì„¤ì •ìˆ˜ì••</div>
                        <div class="shower-button" onclick="adjustShowerValue('pressure', -1)">-</div>
                    </div>
                    <div class="shower-control-panel">
                        <img src="/images/person.png" onclick="location.href='/'"> <!-- ì—¬ê¸° ì´ë¯¸ì§€ë§Œ ë³€ê²½! -->
                        <div class="shower-label" style="color: #2196f3;font-weight: bold;">ì‚¬ìš©ì ë§ì¶¤í˜• ëª¨ë“œ</div>
                    </div>
                </div>
                <div>
                    <div class="shower-label">ìƒ¤ì›Œ í•„í„° ì˜¤ì—¼</div>
                    <div class="shower-progress-bar">
                        <div class="shower-progress shower-blue" style="width: 28%;">28%</div>
                    </div>
                    <div style="color: #2196f3; font-size: 12px; font-weight: bold;">ì•„ì£¼ ì¢‹ì€ ìƒíƒœì…ë‹ˆë‹¤!</div>
                </div>
                <div style="margin-top: 10px;">
                    <div class="shower-label">ìˆ˜ë„ê¼­ì§€ ì˜¤ì—¼</div>
                    <div class="shower-progress-bar">
                        <div class="shower-progress shower-red" style="width: 89%;">89%</div>
                    </div>
                    <div style="color: #f44336; font-size: 12px; font-weight: bold;font-weight: bold;">ì ê²€í•„ìš”! ì´ë¬¼ì§ˆ ì˜ì‹¬!</div>
                </div>
            </div>
        </div>
    </div>

    <div style="width: 100px; height: 100px; transform: translateY(90vh) translateX(1.5vw);">
        <img class="laviologo" src="images/lavio_logo_bottom.png" alt="">
    </div>




    <div id="main-content">
        <div class="user_greet">
            <div>
                <span><strong>{{ username }}</strong> ë‹˜&nbsp;
                    <br>ì¢‹ì€ í•˜ë£¨ ë³´ë‚´ì„¸ìš”!ğŸ€
                </span>
            </div>
            <img src={{ p_path }} alt="" onclick="location.href='/'">
            
        </div>

        <div class="image-container">
            <img src={{ img_path }} alt="í™”ì¥ì‹¤ ì´ë¯¸ì§€" id="light-image">
            <div id="preview_container">
                <span id="close_preview">&times;</span>
                <iframe id="preview_iframe" src="" frameborder="0"></iframe>
            </div>
            <div class="wind-effect" id="wind-effect">
                <!-- <img src="images/ë°”ëŒíš¨ê³¼.gif" alt="ë°”ëŒ íš¨ê³¼" id="wind-gif"> -->
            </div>
        </div>

        <div class="user_greet_bottom">
            <!-- <img class="laviologo" src="images/lavio_logo_bottom.png" alt=""> -->
            <div></div>
            <button id="preview_button">aa</button>
            <!-- <img class="mic" src="images/mic.png"> -->
        </div>


    </div>

    <div id="divForTest"></div>

    <div id="preview_container">
        <iframe src="" width="100%" height="100%" frameborder="0"></iframe>
    </div>

    <script>
        window.addEventListener('message', function(event) {
            document.getElementById('divForTest').innerHTML = `<p>${event.data.message}</p><p>${event.data.senti} : ${event.data.score}</p>`;
        });

        // ê±°ìš¸ ë¯¸ë¦¬ë³´ê¸°
        $(document).on('click', '#preview_button', function(e) {
            e.preventDefault(); // ê¸°ë³¸ ë™ì‘ ë°©ì§€
            const url = '/voice';
            $('#preview_iframe').attr('src', url);
            $('#preview_container').css('display', 'block');
            $('#preview_container').css('width', '320px');
            $('#preview_container').css('height', '500px');
        });

        // ë‹«ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        $('#close_preview').on('click', function() {
            $('#preview_container').css('display', 'none');
        });

        // ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ ì™¸ í´ë¦­ ì‹œ ë‹«ê¸°
        $(document).on('click', function(event) {
            if (!$(event.target).closest("#preview_iframe").length && 
                !$(event.target).is("#preview_button") &&
                !$(event.target).is("#close_preview")) {
                $('#preview_container').css('display', 'none');
            }
        });


        $('.component_1').on('click', function() {
            var childId = $(this).attr('id') + '_child';
            var $child = $('#' + childId);
            
            if ($child.hasClass('show')) {
                $child.removeClass('show').addClass('hide');
            } else {
                $('.show').removeClass('show').addClass('hide');
                $child.removeClass('hide').addClass('show');
            }
        });

        // ì‚¬ì´ë“œë°” í† ê¸€ ë²„íŠ¼ ì´ë²¤íŠ¸
        $('#toggle-sidebar').on('click', function() {
            $('#sidebar').toggleClass('hidden');
            $('#main-content').toggleClass('full');
        });
        
        
        const slider = document.getElementById("myRange");
        const output = document.querySelector(".slider-value");
        output.innerHTML = slider.value + "%";
    
        slider.oninput = function() {
            output.innerHTML = this.value + "%";
            output.style.left = this.value + "%";
        }


        brightnessSlider.addEventListener('input', updateImageStyle);
        hueSlider.addEventListener('input', updateImageStyle);

        window.addEventListener('load', initializeSliders);

        

        // í™˜í’ê¸° ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
        const windSpeedSlider = document.getElementById('wind-speed-slider');
        const windGif = document.getElementById('wind-gif');

        // GIF ì• ë‹ˆë©”ì´ì…˜ì„ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        function updateWindEffect() {
            const speed = windSpeedSlider.value;
            const gifSize = 50 + (speed * 20); // ë°”ëŒ ê°•ë„ì— ë”°ë¼ í¬ê¸° ì¡°ì • (ìµœì†Œ 50pxì—ì„œ ìµœëŒ€ 250px)

            // ë°”ëŒ ê°•ë„ê°€ 0ì¼ ê²½ìš° GIF í‘œì‹œí•˜ì§€ ì•ŠìŒ
            if (speed > 0) {
                windGif.style.width = `${gifSize}px`;
                windGif.style.height = `${gifSize}px`;
            } else {
                windGif.style.width = '0';
                windGif.style.height = '0';
            }
        }

        // ë°”ëŒ ê°•ë„ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
        windSpeedSlider.addEventListener('input', updateWindEffect);

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°”ëŒ íš¨ê³¼ ì´ˆê¸°í™”
        window.addEventListener('load', updateWindEffect);

        // ìƒ¤ì›Œê¸° ì˜¨ë„,ìˆ˜ì•• ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
        function adjustShowerValue(type, change) {
            const element = document.getElementById('shower-' + type);
            if (type === 'temperature') {
                let temp = parseInt(element.textContent);
                temp = Math.max(20, Math.min(50, temp + change));
                element.textContent = temp + 'â„ƒ';
            } else if (type === 'pressure') {
                let [current, max] = element.textContent.split('/').map(Number);
                current = Math.max(1, Math.min(10, current + change));
                element.textContent = current + '/' + max;
            }
        }
    </script>
</body>
</html>



